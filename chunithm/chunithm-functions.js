const chunithm_chart_list={lev_bas:"BASIC",lev_adv:"ADVANCED",lev_exp:"EXPERT",lev_mas:"MASTER",lev_ult:"ULTIMA",we_kanji:"WORLD'S END"};var columns_params=[{displayTitle:"ID (system)",name:"id",data:"id",className:"id detail-hidden",visible:!1},{displayTitle:"#",name:"index",data:"id",className:"id detail-hidden",data:function(e){return e.id},render:renderInWrapper(),width:"20px",searchable:!1,visible:!1},{displayTitle:"„Ç¢„É´„Éê„É†„Ç¢„Éº„Éà",name:"jacket",data:"image",className:"jacket detail-hidden",render:function(e){return'<span class="img-wrap"><img src="jacket/'+e+'"/></span>'},width:"50px",orderable:!1,searchable:!1},{displayTitle:"Êõ≤Âêç",name:"title",data:"title",className:"title-artist detail-hidden",render:function(e,a,t){return"display"===a?'<div class="inner-wrap"><span class="title">'+e+'</span><span class="dash hidden"> - </span><span class="artist-display hidden">'+t.artist+"</span></div>":"filter"===a?e:t.reading},width:"80vw"},{displayTitle:"Êõ≤Âêç (Ë™≠„Åø)",name:"reading",data:"reading",className:"reading",visible:!1,searchable:!1},{displayTitle:"„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà",name:"title_merged",data:"title",className:"artist detail-hidden",render:function(e,a,t){return"display"===a?'<div class="inner-wrap"><span class="artist-display hidden">'+t.artist+"</span></div>":t.reading},searchable:!1},{displayTitle:"„Ç¢„Éº„ÉÜ„Ç£„Çπ„Éà",name:"artist",data:"artist",className:"artist detail-hidden",visible:!1},{displayTitle:"BPM",name:"bpm",data:"bpm",className:"details bpm",searchable:!1,visible:!1},{displayTitle:"„Éê„Éº„Ç∏„Éß„É≥",name:"version",data:"version",className:"details version",filterable:!0,render:renderInWrapper(),customDropdownSortSource:"date",width:"12em"},{displayTitle:"„Ç∏„É£„É≥„É´",name:"category",data:"catname",className:"details category",render:renderInWrapper(),width:"12em",filterable:!0},{displayTitle:"BASIC",name:"lev_bas",data:sortLevels("lev_bas"),className:"lv lv-bsc",render:renderLvNum("lev_bas"),customDropdownSortSource:sortByLeadingZeros("lev_bas"),reverseSortOrder:!0,width:"3rem",filterable:!flat_view},{displayTitle:"ADVANCED",name:"lev_adv",data:sortLevels("lev_adv"),className:"lv lv-adv",render:renderLvNum("lev_adv"),customDropdownSortSource:sortByLeadingZeros("lev_adv"),reverseSortOrder:!0,width:"3rem",filterable:!flat_view},{displayTitle:"EXPERT",name:"lev_exp",data:sortLevels("lev_exp"),className:"lv lv-exp",render:renderLvNum("lev_exp"),customDropdownSortSource:sortByLeadingZeros("lev_exp"),reverseSortOrder:!0,width:"3rem",filterable:!flat_view},{displayTitle:"MASTER",name:"lev_mas",data:sortLevels("lev_mas"),className:"lv lv-mas",render:renderLvNum("lev_mas"),customDropdownSortSource:sortByLeadingZeros("lev_mas"),reverseSortOrder:!0,width:"3rem",filterable:!flat_view},{displayTitle:"ULTIMA",name:"lev_ult",data:sortLevels("lev_ult"),className:"lv lv-ult",render:renderLvNum("lev_ult"),customDropdownSortSource:sortByLeadingZeros("lev_ult"),reverseSortOrder:!0,width:"3rem",filterable:!flat_view},{displayTitle:"WORLD'S END",name:"lev_we",data:"we_kanji",className:"lv lv-we",render:renderWorldsEnd("we_kanji","we_star"),customDropdownSortSource:sortByLeadingZeros("we_star"),reverseSortOrder:!0,width:"3rem",filterable:!flat_view},{displayTitle:"WORLD'S END‚òÜ",name:"we_star",data:convertWEStars("we_star"),className:"lv lv-we we-star",reverseSortOrder:!0,width:"3rem",searchable:!1},{displayTitle:"Ë≠úÈù¢",name:"chart_diff",data:function(e,a,t,s){return 1==flat_view?"sort"===a||"meta"===a?e.chart_diff:convertDifficultyNames(e.chart_diff,!1,chunithm_chart_list):null},className:"lv-name detail-hidden",width:"3rem",createdCell:flat_view?function(e,a,t,s,l){$(e).addClass(t.chart_diff)}:null,render:flat_view?renderChartDifficultyName("chart_diff",!1,chunithm_chart_list):null,customDropdownSortSource:flat_view?sortByDifficultyCategory("chart_diff",chunithm_chart_list):null,filterable:flat_view,visible:!1},{displayTitle:"Èõ£ÊòìÂ∫¶„Ç∞„É´„Éº„Éó",name:"chart_lev",data:flat_view?"chart_lev":null,className:"lv detail-hidden",width:"4rem",customDropdownSortSource:sortByLeadingZeros("chart_lev"),reverseSortOrder:!0,visible:!1},{displayTitle:"Ë≠úÈù¢„É¨„Éô„É´",name:"chart_lev_i",data:flat_view?"chart_lev_i":null,className:"lv lv-name detail-hidden",render:flat_view?renderChartDifficultyNameAndLv("chart_diff","chart_lev","chart_lev_i","chart_lev_i_display",chunithm_chart_list):null,width:"4rem",createdCell:flat_view?function(e,a,t,s,l){$(e).addClass(t.chart_diff)}:null,searchable:!1,visible:flat_view},{displayTitle:"„Éé„Éº„ÉàÊï∞",name:"chart_notes",data:flat_view?"chart_notes":null,className:"details notecount detail-hidden nowrap",width:"8em",searchable:!1},{displayTitle:"TAP",name:"chart_notes_tap",data:flat_view?"chart_notes_tap":null,className:"details notecount detail-hidden",width:"5em",searchable:!1,visible:!1},{displayTitle:"HOLD",name:"chart_notes_hold",data:flat_view?"chart_notes_hold":null,className:"details notecount detail-hidden",width:"5em",searchable:!1,visible:!1},{displayTitle:"SLIDE",name:"chart_notes_slide",data:flat_view?"chart_notes_slide":null,className:"details notecount detail-hidden",width:"5em",searchable:!1,visible:!1},{displayTitle:"AIR",name:"chart_notes_air",data:flat_view?"chart_notes_air":null,className:"details notecount detail-hidden",width:"5em",searchable:!1,visible:!1},{displayTitle:"FLICK",name:"chart_notes_flick",data:flat_view?"chart_notes_flick":null,className:"details notecount detail-hidden",width:"5em",searchable:!1,visible:!1},{displayTitle:"Ë≠úÈù¢‰ΩúËÄÖ",name:"chart_designer",data:flat_view?"chart_designer":null,width:"15em",className:"details detail-hidden designer",filterable:flat_view,searchable:flat_view},{displayTitle:"Ë≠úÈù¢‰ΩúËÄÖ",name:"chart_link",data:flat_view?"chart_link":null,render:flat_view?renderChartLinkBtn("chart_link"):null,width:"5em",className:"details detail-hidden chart-link"},{displayTitle:"ËøΩÂä†Êó•",name:"date",data:function(e,a,t,s){return formatDate(e.date)},className:"date",render:function(e,a,t){return"display"===a?'<div class="inner-wrap">'+e+"</div>":e},reverseSortOrder:!0,width:"4em",filterable:!0},{displayTitle:"NEW",name:"new",data:"newflag",className:"detail-hidden",searchable:!1}],default_order=flat_view?[[getColumnIndexByName("chart_lev_i"),"desc"],[getColumnIndexByName("chart_diff"),"desc"],[getColumnIndexByName("date"),"desc"]]:[[getColumnIndexByName("date"),"desc"],[getColumnIndexByName("id"),"asc"]];function convertWEStars(e){const a={1:"1",3:"2",5:"3",7:"4",9:"5"};return a.hasOwnProperty(e)?a[e]:e}function displayWEStars(e){const a={1:"‚òÜ",3:"‚òÜ‚òÜ",5:"‚òÜ‚òÜ‚òÜ",7:"‚òÜ‚òÜ‚òÜ‚òÜ",9:"‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ"};return a.hasOwnProperty(e)?a[e]:e}function renderWorldsEnd(e,a){return function(t,s,l){return"display"===s?""!==l[e]?'<div class="inner-wrap"><span class="lv-num-simple">'+l[e]+'</span><span class="lv-num-precise">‚òÜ'+convertWEStars(l[a])+"</span></div>":"":t}}function processChunithmChartData(e,a){return e[a]?"we_kanji"===a?{...e,chart_diff:a,chart_lev:e[a],chart_lev_i:convertWEStars(e.we_star),chart_lev_i_display:convertWEStars(e.we_star),chart_notes:e.lev_we_notes,chart_notes_tap:e.lev_we_notes_tap,chart_notes_hold:e.lev_we_notes_hold,chart_notes_slide:e.lev_we_notes_slide,chart_notes_air:e.lev_we_notes_air,chart_notes_flick:e.lev_we_notes_flick,chart_designer:e.lev_we_designer,chart_link:e.lev_we_chart_link}:{...e,chart_diff:a,chart_lev:e[a],chart_lev_i:parseFloat(e[a+"_i"]||e[a].replace("+",".5")),chart_lev_i_display:e[a+"_i"]||`<span class="approx">${parseFloat(e[a].replace("+",".5")).toFixed(1)}</span>`,chart_notes:e[a+"_notes"],chart_notes_tap:e[a+"_notes_tap"],chart_notes_hold:e[a+"_notes_hold"],chart_notes_slide:e[a+"_notes_slide"],chart_notes_air:e[a+"_notes_air"],chart_notes_flick:e[a+"_notes_flick"],chart_designer:e[a+"_designer"],chart_link:e[a+"_chart_link"]}:null}$(document).ready((function(){$.getJSON("data/music-ex.json",(e=>{$("#table").DataTable({data:flattenMusicData(e,flat_view,chunithm_chart_list,processChunithmChartData),buttons:[{extend:"colvis",className:"config-btn",columns:".toggle",text:"„Ç´„É©„É†ON/OFF",collectionTitle:"Ë°®Á§∫„Åô„Çã„Ç´„É©„É†„ÇíÈÅ∏Êäû",collectionLayout:"fixed",fade:150}],columns:columns_params,deferRender:!0,dom:'<"toolbar-group"<"toolbar filters"><"toolbar search"f>><"toolbar secondary"<"info"ilB>><"table-inner"rt><"paging"p>',language:localize_strings,lengthMenu:[[25,50,100,-1],[25,50,100,"All"]],order:default_order,responsive:{details:{type:"column",target:"tr",display:$.fn.dataTable.Responsive.display.modal({header:function(e){var a=e.data(),t=encodeURIComponent(a.title.replaceAll("&","ÔºÜ").replaceAll(":","Ôºö").replaceAll("[","Ôºª").replaceAll("]","ÔºΩ").replaceAll("#","ÔºÉ").replaceAll('"',"‚Äù")),s="https://wikiwiki.jp/chunithmwiki/"+t,l=a.wikiwiki_url?a.wikiwiki_url:s;return'<div class="modal-header" style="--img:url(jacket/'+a.image+');"><span class="header-img"></span><span class="header-img-overlay"></span><div class="img-wrap"><img src="jacket/'+a.image+'"/></div><div class="content-wrap"><span class="title">'+a.title+'</span><span class="artist">'+a.artist+'</span><div class="quicklinks"><a class="wiki" href="'+l+'" target="_blank" rel="noopener noreferer nofollow">Wiki</a><a class="youtube" href="https://youtube.com/results?search_query=CHUNITHM+Ë≠úÈù¢Á¢∫Ë™ç+'+t+'" target="_blank" rel="noopener noreferer nofollow"></a></div></div></div>'},footer:function(e){var a=e.data();return'<div class="modal-footer"><div class="report"><a class="report-btn" href="https://twitter.com/intent/tweet?text=@zvuc_%0A%E3%80%90%23CHUNITHM_DB%20%E6%83%85%E5%A0%B1%E6%8F%90%E4%BE%9B%E3%80%91%0A%E6%9B%B2%E5%90%8D%EF%BC%9A'+encodeURIComponent(a.title)+'%0A%E8%AD%9C%E9%9D%A2%EF%BC%9A" target="_blank" rel="noopener noreferer nofollow">üí¨ Ë∂≥„Çä„Å™„ÅÑÊÉÖÂ†±„ÉªÈñìÈÅï„ÅÑ„ÇíÂ†±Âëä„Åô„Çã ÔºàTwitterÔºâ</a></div></div>'}}),renderer:function(e,a,t){var s=e.row(a).data(),l=""!==s.lev_ult?"ultima":"",n=""!==s.we_kanji?"worldsend":"",r=$.map(t,(function(e,a){columns_params[e.columnIndex];if(!e.className.includes("detail-hidden")&&!e.className.includes("lv "))return'<div class="row '+e.className+'" data-dt-row="'+e.rowIndex+'" data-dt-column="'+e.columnIndex+'"><span class="row-label">'+e.title+"</span> <span>"+e.data+"</span></div>"})).join(""),i=$.map(t,(function(e,a){var t=columns_params[e.columnIndex];if(!e.className.includes("detail-hidden")&&e.className.includes("lv ")){var l=t.name,r=l.concat("_notes"),i=l.concat("_notes_tap"),d=l.concat("_notes_hold"),c=l.concat("_notes_slide"),o=l.concat("_notes_air"),p=l.concat("_notes_flick"),_=l.concat("_designer"),v=l.concat("_chart_link");return'<div class="row '+e.className+'" data-dt-row="'+e.rowIndex+'" data-dt-column="'+e.columnIndex+'"><span class="row-label"><span>'+t.displayTitle+'</span></span> <span class="content-col"><span class="main-info-wrap">'+(n?'<div class="inner-wrap"><span class="lv-num-simple">'+s.we_kanji+'</span><span class="lv-num-precise">'+displayWEStars(s.we_star)+"</span></div>":e.data)+'</span><span class="sub-info-wrap">'+(hasPropertyAndValue(s,r)?'<span class="notes-detail-wrap"><span class="notes"><span class="label">Notes</span><span>'+s[r]+'</span></span><span class="notes-sub-detail-wrap">'+(hasPropertyAndValue(s,i)?'<span class="notes_tap"><span class="label">tap</span><span>'+s[i]+"</span></span>":"")+(hasPropertyAndValue(s,d)?'<span class="notes_hold"><span class="label">hold</span><span>'+s[d]+"</span></span>":"")+(hasPropertyAndValue(s,c)?'<span class="notes_slide"><span class="label">slide</span><span>'+s[c]+"</span></span>":"")+(hasPropertyAndValue(s,o)?'<span class="notes_air"><span class="label">air</span><span>'+s[o]+"</span></span>":"")+(hasPropertyAndValue(s,p)?'<span class="notes_flick"><span class="label">flick</span><span>'+s[p]+"</span></span>":"")+"</span></span>":"")+(hasPropertyAndValue(s,_)?'<span class="designer"><span class="label">Designer</span><span>'+s[_]+"</span></span>":"")+"</span></span>"+(hasPropertyAndValue(s,v)?'<span class="chart-link">'+chartLinkBtn(s[v])+"</span>":"")+"</div>"}})).join(""),d=$('<div class="table-wrapper"/>').append($('<div class="details-table chart-details '+n+l+'"/>').append('<div class="table-header"><span class="th-label">CHART</span></div>').append(i)).append($('<div class="details-table misc-details"/>').append('<div class="table-header"><span class="th-label">SONG METADATA</span></div>').append(r));return d||!1}}},rowGroup:{dataSrc:"date",startRender:flat_view||""!=searchParams?null:function(e,a){return"<div>"+formatDate(a,"JP")+" ËøΩÂä†</div>"}},scrollX:!0,initComplete:function(){tableInitCompleteFunctions(this)}})}))}));
